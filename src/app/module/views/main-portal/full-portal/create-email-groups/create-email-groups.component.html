<div class="container-fluid">
  <!-- start page title -->
  <div class="row">
    <div class="col-sm-6">
      <div class="page-title-box">
        <h4>Create Email Groups</h4>
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item">
            <a routerLink="/panel/dashboard">Dashboard</a>
          </li>
          <li class="breadcrumb-item active">Create Email Groups</li>
        </ol>
      </div>
    </div>
    <div class="col-sm-6">
      <app-main-portal-time-date></app-main-portal-time-date>
    </div>
  </div>
  <!-- end page title -->

  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <!-- <div class="row">
            <form [formGroup]="emailGroupForm" (ngSubmit)="createEmailGroup()">
              <div class="mb-1" style="display: flex; justify-content: space-between">
                <div style="flex-grow: 1; margin-right: 8px">
                  <label class="form-label" for="emailAddress">Email<span style="color: red">*</span></label>
                  <input [formControl]="emailAddressControl" type="email" class="form-control" id="emailAddress" placeholder="Enter your email" />
                  <div class="error-msg" *ngIf="emailAddressControl.touched && emailAddressControl.invalid && emailAddressControl.errors && !emailAddressControl.errors['pattern']">
                    <i class="fa fa-times-circle"></i>
                    Please enter email address
                  </div>
                </div>
                <div style="flex-grow: 1; margin-right: 8px">
                  <label class="form-label" for="severity">Severity <span style="color: red">*</span></label>
                  <select [formControl]="severityControl" class="form-control form-select" name="severity" id="severity">
                    <option value="" selected>Select Severity</option>
                    <option *ngFor="let severity of severities" [value]="severity.enumName">{{ severity.displayName }}</option>
                  </select>
                  <div class="error-msg" *ngIf="severityControl.touched && severityControl.invalid">
                    <i class="fa fa-times-circle"></i>
                    Please select severity
                  </div>
                </div>
              </div>
              <div style="margin-bottom: 1%">
                <button type="submit" class="btn btn-primary w-md" [disabled]="submitBtnClicked">Submit</button>
              </div>
            </form>
          </div> -->
          <!-- <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-3">
              <table class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%">
                <thead>
                  <tr>
                    <th>Severity 1</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let user of userList">
                    <td>
                      <button type="button" class="btn btn-sm btn-danger waves-effect waves-light">
                        <i class="mdi mdi-close"></i>
                      </button>
                      <a href="" style="margin-left: 3%">{{ user.email }} </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-3">
              <table class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%">
                <thead>
                  <tr>
                    <th>Severity 2</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let user of userList">
                    <td>
                      <button type="button" class="btn btn-sm btn-danger waves-effect waves-light">
                        <i class="mdi mdi-close"></i>
                      </button>
                      <a href="" style="margin-left: 3%">{{ user.email }}</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-3">
              <table class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%">
                <thead>
                  <tr>
                    <th>Severity 3</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let user of userList">
                    <td>
                      <button type="button" class="btn btn-sm btn-danger waves-effect waves-light">
                        <i class="mdi mdi-close"></i>
                      </button>
                      <a href="" style="margin-left: 3%">{{ user.email }}</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-3">
              <table class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%">
                <thead>
                  <tr>
                    <th>Severity 4</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let user of userList">
                    <td>
                      <button type="button" class="btn btn-sm btn-danger waves-effect waves-light">
                        <i class="mdi mdi-close"></i>
                      </button>
                      <a href="" style="margin-left: 3%">{{ user.email }}</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div> -->

          <div class="row">
            <form [formGroup]="emailGroupForm" (ngSubmit)="createEmailGroup()">
              <div class="mb-1" style="display: flex; justify-content: space-between">
                <div style="flex-grow: 1; margin-right: 8px">
                  <label class="form-label" for="emailAddress">Email<span style="color: red">*</span></label>
                  <input [formControl]="emailAddressControl" type="email" class="form-control" id="emailAddress" placeholder="Enter your email" />
                  <div class="error-msg" *ngIf="emailAddressControl.touched && emailAddressControl.invalid && emailAddressControl.errors && !emailAddressControl.errors['pattern']">
                    <i class="fa fa-times-circle"></i>
                    Please enter email address
                  </div>
                </div>
                <div style="flex-grow: 1; margin-right: 8px; margin-left: 5%">
                  <label class="form-label" for="emailAddress">Severity Levels<span style="color: red">*</span></label>
                  <div class="form-check form-switch form-switch-md mb-2" dir="ltr" *ngFor="let severity of severities">
                    <input type="checkbox" (change)="changeSeverityAssisgn($event, severity.enumName)" class="form-check-input" id="productSwitch{{ severity.enumName }}" [checked]="false" />
                    <label class="form-check-label" for="productSwitch{{ severity.enumName }}">{{ severity.displayName }} </label>
                  </div>
                  <div class="error-msg" *ngIf="showSeverityError">
                    <i class="fa fa-times-circle"></i>
                    Please select at least one severity level
                  </div>
                </div>
              </div>
              <div style="margin-bottom: 1%">
                <button type="submit" class="btn btn-primary w-md" [disabled]="submitBtnClicked">Submit</button>
              </div>
            </form>
          </div>
          <div class="row">
            <div class="col-sm-12">
              <table class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%">
                <thead>
                  <tr>
                    <th>Email</th>
                    <th>Severity Levels</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let emailGroup of emailGroupList">
                    <td>
                      <button type="button" class="btn btn-sm btn-danger waves-effect waves-light" (click)="deleteEmailGroup(emailGroup.id)">
                        <i class="mdi mdi-close"></i>
                      </button>
                      <a href="" style="margin-left: 3%">{{ emailGroup.email }}</a>
                    </td>
                    <td>
                      <div style="margin-bottom: 5px" *ngFor="let severity of emailGroup.severities">
                        <span>{{ getSeverityDisplayName(severity) }}</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end col -->
  </div>
  <!-- end row -->
</div>
